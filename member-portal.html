<!doctype html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ä¼šå‘˜ç§¯åˆ† Â· KEDAI EMAS SIANG HENG</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- é¡¶æ  -->
  <div class="navbar">
    <div class="navbar-inner container">
      <div class="brand">
        <span class="crest"></span>
        <span data-i18n="brand_title">KEDAI EMAS SIANG HENG ä¼šå‘˜ç³»ç»Ÿ</span>
      </div>
      <div class="actions">
        <a class="btn" href="index.html">è¿”å›é¦–é¡µ</a>
      </div>
    </div>
  </div>

  <!-- å†…å®¹ï¼šç§¯åˆ†æ˜¾ç¤ºå¡ç‰‡ -->
  <section class="hero">
    <div class="container">
      <div class="wrap">
        <div class="card" style="max-width:680px;margin:0 auto">
          <h1 class="h1">ç§¯åˆ†æŸ¥è¯¢ç»“æœ</h1>
          <p id="pointsDisplay">åŠ è½½ä¸­...</p>
        </div>
      </div>
    </div>
  </section>

  <div class="footer">Â© 2025 KEDAI EMAS SIANG HENG Â· All rights reserved.</div>

  <!-- âœ… å¤„ç†æ‰‹æœºå·å‚æ•° -->
  <script>
    function normalizePhone(p) {
      return (p || '').trim().replace(/\s+/g, '').replace(/[^\d]/g, '');
    }

    document.addEventListener("DOMContentLoaded", function() {
      const urlParams = new URLSearchParams(window.location.search);
      let phone = urlParams.get("phone");
      phone = normalizePhone(phone);

      if (phone) {
        fetchPoints(phone);
      } else {
        document.getElementById("pointsDisplay").innerText = "æœªæ‰¾åˆ°è¯¥æ‰‹æœºå·";
      }
    });

    // âœ… è¿™é‡Œæ”¾ä½ åŸæ¥æŸ¥è¯¢ç§¯åˆ†çš„é€»è¾‘
    async function fetchPoints(phone) {
      try {
        // âš ï¸ ç”¨ä½ å®é™…çš„ Supabase / API æŸ¥è¯¢æ›¿æ¢ä¸‹é¢ä»£ç 
        // ä¾‹å¦‚ï¼š
        // const { data, error } = await supabase.from("members").select("*").eq("phone", phone);
        // if (error) throw error;
        // if (data.length === 0) {
        //   document.getElementById("pointsDisplay").innerText = "æœªæ‰¾åˆ°è¯¥æ‰‹æœºå·çš„ç§¯åˆ†";
        // } else {
        //   document.getElementById("pointsDisplay").innerText = data[0].points + " åˆ†";
        // }

        // ğŸ”§ ä¸´æ—¶æµ‹è¯•ï¼ˆä½ å¯ä»¥åˆ é™¤ï¼‰ï¼šæ˜¾ç¤ºæ‹¿åˆ°çš„æ‰‹æœºå·
        document.getElementById("pointsDisplay").innerText = "ä½ æŸ¥è¯¢çš„æ‰‹æœºå·æ˜¯: " + phone;
      } catch (err) {
        console.error("æŸ¥è¯¢å¤±è´¥:", err);
        document.getElementById("pointsDisplay").innerText = "æŸ¥è¯¢å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•";
      }
    }
  </script>
</body>
</html>
