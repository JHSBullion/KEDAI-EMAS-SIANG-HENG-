
<!doctype html><html lang="zh">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>QR</title>
  <link rel="stylesheet" href="style.css">
  <script src="lang.js"></script>
  <script src="app.js"></script>
</head>
<body>
  <div id="nav"></div>
  <div class="container">
    <div class="card" style="max-width:820px;margin:auto">
      <div class="title" data-i18n="printableQR">打印用二维码</div>
      <div class="note" data-i18n="defaultQRInfo">默认生成本站 index.html（顾客扫码后输入手机号查询）</div>
      <div class="center" style="padding:20px 0">
        <img id="qr" alt="QR" style="width:260px;height:260px;border:10px solid #fff;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.06)" />
      </div>
      <label data-i18n="link">链接（可改，例如：member-portal.html?phone=0123456789）</label>
      <input id="qrurl" class="input mono">
      <div class="actions">
        <button class="btn gold" onclick="regen()" data-i18n="regenerate">重新生成</button>
        <button class="btn" onclick="window.print()" data-i18n="print">打印</button>
      </div>
    </div>
  </div>
  <div class="footer">© 2025 KEDAI EMAS SIANG HENG · All rights reserved.</div>

<script>
document.getElementById('nav').innerHTML = navbar();
bindLangSelect();

function defaultUrl(){
  const loc = location.origin + location.pathname.replace(/\/qr\.html$/,'/index.html');
  return loc;
}
function regen(){
  const u = document.getElementById('qrurl').value.trim() || defaultUrl();
  // Use public QR API for image
  const api = 'https://api.qrserver.com/v1/create-qr-code/?size=260x260&data=' + encodeURIComponent(u);
  document.getElementById('qr').src = api;
}
document.getElementById('qrurl').value = defaultUrl();
regen();
</script>
</body></html>
