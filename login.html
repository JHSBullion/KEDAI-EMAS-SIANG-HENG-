<!doctype html>
<html><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title data-i18n="login">登录</title>
<link rel="stylesheet" href="style.css">
<script src="lang.js" defer></script>
<script type="module" src="supabase.js"></script>
</head>
<body>
  
<div class="navbar">
  <div class="navbar-inner container">
    <div class="brand">
      <span class="dot"></span>
      <span data-i18n="login">KEDAI EMAS SIANG HENG 会员系统</span>
    </div>
    <div class="actions">
      <select class="lang">
        <option value="zh">中</option><option value="en">EN</option><option value="ms">BM</option>
      </select>
    </div>
  </div>
</div>

  <div class="container">
    <div class="grid-2">
      <div class="card">
        <h2 data-i18n="login">登录</h2>
        <form id="loginForm">
          <label data-i18n="email">邮箱</label>
          <input id="email" type="email" class="input" required>
          <label data-i18n="password">密码</label>
          <input id="password" type="password" class="input" required>
          <div style="margin-top:12px"><button class="btn btn-gold" type="submit" data-i18n="btn_login">登录</button></div>
        </form>
        <div id="msg" class="msg" style="margin-top:10px"></div>
      </div>
      <div class="card">
        <h3>Tips</h3>
        <p class="muted">Use your Supabase admin email/password (e.g. admin@shop.com / 123456)</p>
      </div>
    </div>
  </div>
  <script type="module">
    import { supabase } from './supabase.js'
    const f=document.getElementById('loginForm'), msg=document.getElementById('msg')
    f.addEventListener('submit', async (e)=>{e.preventDefault(); msg.textContent=''
      const email=document.getElementById('email').value.trim()
      const password=document.getElementById('password').value.trim()
      const { error } = await supabase.auth.signInWithPassword({ email, password })
      if(error){ msg.className='msg err'; msg.textContent=error.message; return }
      window.location.href='admin-members.html'
    })
  </script>
</body></html>
